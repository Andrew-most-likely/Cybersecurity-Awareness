const $=e=>document.querySelector(e),qs=e=>Array.from(document.querySelectorAll(e)),appState={progress:{},quizAnswers:{},badges:[],startTime:Date.now()},MODULES=[{id:"password",icon:"lock",title:"Password Security",description:"Learn to create strong, unique passwords and manage them safely.",progress:{completed:0,total:3},sections:[{type:"introduction",title:"Why Passwords Matter",objectives:["Understand how passwords protect your digital life","Learn about common password vulnerabilities","Recognize the cost of password breaches"],content:"Passwords are the first line of defense for protecting your online accounts and personal data. They prove that you are the rightful owner of your account every time you log in. If someone gains access to your passwords, they can impersonate you, steal your identity, or gain control of your finances and sensitive information.Many people underestimate how valuable their data is to criminals. Hackers can use stolen passwords to access email, bank accounts, or social media. They may also sell your credentials on the dark web to other criminals. Even if you think you have nothing to hide, your personal information can be used in scams, identity theft, and fraud.Common password weaknesses include using short passwords, predictable words, or reusing the same password across multiple accounts. If one site is breached, attackers can use your reused password to break into others. By understanding the importance of strong passwords, you can take real steps to protect your online life."},{type:"lesson",title:"Creating Strong Passwords",objectives:["Use long passwords with mixed characters","Avoid predictable or personal information","Make each password unique"],content:'A strong password is one that attackers cannot easily guess or crack. The best passwords are long, complex, and unique for each account. You should always use at least twelve characters, mixing uppercase and lowercase letters, numbers, and symbols.Avoid using dictionary words, your name, birthdate, pet names, or common patterns like "12345" or "qwerty." Attackers often use automated tools that can guess thousands of passwords per second, especially those that follow predictable patterns.One approach is to use a passphrase. This is a series of random but memorable words, like "CoffeeRiverBridgeLight." A passphrase is easier to remember and can still be extremely secure, especially if you include numbers or symbols.Every account you have should use a different password. If one is stolen, your others remain safe. Consider writing down a strong password example such as "Tr33!Rain7Horse$Map" â€” complex, long, and unique.'},{type:"tool",title:"Password Managers",objectives:["Understand how password managers work","Learn to choose a reputable password manager","Set up your first password vault"],content:"A password manager securely stores all of your passwords in one encrypted vault. It helps you create and use strong passwords without needing to remember each one. You only need to remember one master password to unlock your vault.Most password managers can automatically fill in your credentials when you visit a login page. They can also generate random, highly secure passwords for new accounts. Reputable password managers encrypt your data locally, meaning even the company cannot access your passwords.When choosing a password manager, look for one with a strong reputation, transparent security practices, and support for multi-device syncing. Examples include Bitwarden, 1Password, and Dashlane. Avoid unknown or unverified tools.After installing a password manager, create a master password that is long and memorable but unique to you. Once your vault is ready, start saving all of your existing passwords inside it and let the manager generate new ones going forward."}]},{id:"2fa",icon:"shield",title:"Two-Factor Authentication",description:"Add an extra layer of protection to your online accounts.",progress:{completed:0,total:2},sections:[{type:"introduction",title:"What is Two-Factor Authentication",objectives:["Learn how two-factor authentication works","Understand different types of 2FA","Know when to use it"],content:"Two-Factor Authentication, often called 2FA, adds a second layer of security to your accounts. It means that even if someone steals your password, they still need another piece of information to log in.The most common forms of 2FA are one-time codes sent to your phone or generated by an authentication app. Other types include hardware security keys, biometric factors like fingerprints, or codes sent by email. The idea is that access requires both something you know (your password) and something you have (your phone or device).Without 2FA, a stolen password alone can give an attacker full access. With it enabled, even a hacker who knows your password would also need your physical device to get in. It greatly reduces your risk of being hacked."},{type:"lesson",title:"Setting Up Two-Factor Authentication",objectives:["Enable 2FA on your important accounts","Use an authenticator app instead of SMS","Store backup codes safely"],content:"You should enable two-factor authentication on every important account, including email, banking, and social media. Most major websites support it in their security or privacy settings.When setting it up, choose an authenticator app like Google Authenticator, Authy, or Microsoft Authenticator instead of using text messages. SMS codes can sometimes be intercepted if someone tricks your phone company into transferring your number.After enabling 2FA, you will scan a QR code with your app, which then starts generating short one-time codes. These codes change every 30 seconds and must be entered along with your password when logging in.Make sure to save your backup codes in a secure place, such as your password manager or a printed copy stored safely. Backup codes are the only way to recover access if you lose your phone."}]},{id:"phishing",icon:"phish",title:"Phishing Awareness",description:"Learn how to spot and avoid phishing attacks.",progress:{completed:0,total:2},sections:[{type:"introduction",title:"Understanding Phishing",objectives:["Recognize common phishing tactics","Identify red flags in emails and messages","Understand the dangers of phishing attacks"],content:"Phishing is a type of scam where attackers trick you into giving away sensitive information, such as passwords, banking details, or personal data. It often comes in the form of an email or message that looks like it is from a trusted source.A typical phishing email may claim that there is a problem with your account or that you need to verify your identity. It often contains links to fake websites that look nearly identical to real ones. When you enter your information, it goes directly to the attacker.Common signs of phishing include poor grammar, urgent or threatening language, suspicious links, or requests for personal data. Always take time to verify who sent the message before clicking or replying."},{type:"practice",title:"Spotting Phishing",objectives:["Check sender addresses carefully","Hover over links before clicking","Watch for urgency or threats"],content:"Before you click any link, check the sender's address carefully. Many phishing emails come from addresses that look similar to legitimate ones but contain slight differences, such as support@paypa1.com instead of support@paypal.com.Hover your mouse over any links to see where they lead before you click them. If the address looks suspicious or unfamiliar, do not proceed.Attackers often try to create a sense of urgency, such as warning you that your account will be closed unless you act immediately. This is a manipulation tactic. Take your time to verify the message through official websites or customer support instead of reacting quickly.Always remember, legitimate companies will never ask you to provide passwords or financial information through email or text messages."}]},{id:"updates",icon:"refresh",title:"Software Updates",description:"Learn why keeping your software updated keeps you safe.",progress:{completed:0,total:1},sections:[{type:"lesson",title:"Why Updates Matter",objectives:["Understand software vulnerabilities","Learn about zero-day exploits","Enable automatic updates"],content:"Software updates are not just about new features. They often include critical security patches that fix vulnerabilities found by researchers or attackers. When software remains unpatched, criminals can exploit those weaknesses to gain access to your device or data.A zero-day exploit is an attack that targets a vulnerability before the developer knows about it or releases a fix. This is why keeping software up to date is essential. Even a few days of delay can leave your system at risk.Always enable automatic updates for your operating system, browser, and important applications. This ensures that you receive security fixes as soon as they become available without having to remember to check manually."}]},{id:"wifi",icon:"wifi",title:"WiFi Security",description:"Protect yourself on public and home wireless networks.",progress:{completed:0,total:1},sections:[{type:"lesson",title:"Secure WiFi Practices",objectives:["Use VPNs on public networks","Secure your home router","Avoid sensitive transactions on public WiFi"],content:"Public WiFi networks, like those in coffee shops or airports, are convenient but often insecure. Attackers can intercept unencrypted data on these networks to steal personal information such as passwords or credit card numbers. Avoid logging into sensitive accounts or making payments while using public WiFi.If you must connect, use a Virtual Private Network, or VPN, to encrypt your internet traffic. This prevents others on the same network from viewing what you are doing.At home, secure your router by changing its default administrator password and using strong encryption, such as WPA3. Regularly update your router's firmware and disable remote management features you do not need.By following these practices, you greatly reduce the risk of your network traffic being intercepted or your devices being compromised."}]},{id:"backup",icon:"save",title:"Data Backup",description:"Protect your important data with regular backups.",progress:{completed:0,total:1},sections:[{type:"lesson",title:"Backup Strategies",objectives:["Follow the 3-2-1 backup rule","Use both cloud and local backups","Test your backups regularly"],content:"Data loss can happen at any time due to hardware failure, accidental deletion, or malware. Backing up your data ensures that you can recover it even if your device is damaged or compromised.The 3-2-1 backup rule is a simple and effective strategy. Keep three copies of your data: one primary and two backups. Store them on at least two different types of media, such as a hard drive and a cloud service, and keep one copy off-site, such as in cloud storage or at another location.Use reliable cloud storage services for automatic backups, but also keep a local backup on an external drive. Schedule regular backups and verify that they work by testing file recovery occasionally.By maintaining backups, you protect yourself from permanent data loss and ensure that your information is always recoverable."}]}],QUIZZES=[{id:"password-quiz",title:"Password Security Quiz",questions:[{question:"What is the minimum recommended length for a strong password?",options:["6 characters","8 characters","12 characters","20 characters"],correct:2,explanation:"Passwords should be at least 12 characters long to provide adequate security against brute force attacks."},{question:"Which is the most secure type of two-factor authentication?",options:["SMS codes","Email codes","Authenticator app","Security questions"],correct:2,explanation:"Authenticator apps are more secure than SMS because they can't be intercepted and work offline."},{question:"What should you do if you receive a suspicious email asking you to verify your account?",options:["Click the link to verify","Reply with your information","Delete it and contact the company directly","Forward it to friends"],correct:2,explanation:"Never click suspicious links. Instead, delete the email and contact the company through official channels to verify."}]},{id:"phishing-quiz",title:"Phishing Detection Challenge",questions:[{question:"Which is a common sign of a phishing email?",options:["Professional formatting","Urgent language demanding immediate action","Company logo","Proper grammar"],correct:1,explanation:"Phishing emails often create a false sense of urgency to pressure victims into acting without thinking."},{question:"Before clicking a link, you should:",options:["Just click it","Check if it looks legitimate","Hover over it to see the actual URL","Trust the sender"],correct:2,explanation:"Always hover over links to see where they actually point before clicking. Phishers often disguise malicious URLs."}]},{id:"updates-quiz",title:"Software Updates Quiz",questions:[{question:"Why are software updates important for security?",options:["They make software faster","They patch known vulnerabilities","They add new features","They're optional"],correct:1,explanation:"Updates patch security vulnerabilities that hackers could exploit. Keeping software updated is critical."},{question:"What is a zero-day exploit?",options:["An exploit that takes zero days to fix","An attack on day zero of software release","A vulnerability unknown to the software maker","A free exploit tool"],correct:2,explanation:"Zero-day exploits target vulnerabilities that are unknown to the software vendor, making them especially dangerous."}]},{id:"wifi-quiz",title:"WiFi Security Quiz",questions:[{question:"What should you use when connecting to public WiFi?",options:["Nothing special","A VPN","Incognito mode","A proxy"],correct:1,explanation:"A VPN encrypts your traffic, protecting your data even on unsecured public networks."},{question:"Which WiFi security protocol is most secure?",options:["WEP","WPA","WPA2","WPA3"],correct:3,explanation:"WPA3 is the latest and most secure WiFi encryption standard, offering improved protection over WPA2."}]},{id:"backup-quiz",title:"Data Backup Quiz",questions:[{question:"What is the 3-2-1 backup rule?",options:["3 backups, 2 locations, 1 cloud","3 copies, 2 different media, 1 offsite","3 drives, 2 computers, 1 server","3 days, 2 weeks, 1 month"],correct:1,explanation:"The 3-2-1 rule means 3 copies of data, on 2 different media types, with 1 copy stored offsite."},{question:"How often should you test your backups?",options:["Never","Once a year","Regularly","Only when you need them"],correct:2,explanation:"Regular testing ensures your backups actually work when you need them. Untested backups may be corrupted."}]}],RESOURCES=[{title:"Password Managers",description:"Industry-leading password managers to secure your accounts",links:[{name:"1Password",desc:"User-friendly with family sharing options",url:"https://1password.com"},{name:"Bitwarden",desc:"Open-source and affordable",url:"https://bitwarden.com"},{name:"LastPass",desc:"Free tier with premium features",url:"https://www.lastpass.com"}]},{title:"Security Checking Tools",description:"Check if your accounts have been compromised",links:[{name:"Have I Been Pwned",desc:"Check if your email appears in known data breaches",url:"https://haveibeenpwned.com"},{name:"Password Strength Checker",desc:"Test how strong your passwords are",url:"https://www.security.org/how-secure-is-my-password/"}]},{title:"Official Guidelines",description:"Government and industry security frameworks",links:[{name:"NIST Cybersecurity Framework",desc:"Comprehensive security standards",url:"https://www.nist.gov/cyberframework"},{name:"CISA Security Tips",desc:"US government security guidance",url:"https://www.cisa.gov/topics/cybersecurity-best-practices"},{name:"Stay Safe Online",desc:"National cybersecurity awareness resources",url:"https://staysafeonline.org"}]},{title:"Learning Resources",description:"Expand your cybersecurity knowledge",links:[{name:"Cybrary",desc:"Free cybersecurity training courses",url:"https://www.cybrary.it"},{name:"SANS Security Training",desc:"Professional security education",url:"https://www.sans.org"},{name:"Google Safety Center",desc:"Practical online safety tips",url:"https://safety.google"}]},{title:"Two-Factor Authentication Apps",description:"Recommended authenticator applications",links:[{name:"Google Authenticator",desc:"Simple and reliable 2FA app",url:"https://support.google.com/accounts/answer/1066447"},{name:"Authy",desc:"Multi-device 2FA with cloud backup",url:"https://authy.com"},{name:"Microsoft Authenticator",desc:"Integrated with Microsoft services",url:"https://www.microsoft.com/en-us/security/mobile-authenticator-app"}]}],GLOSSARY=[{term:"Two-Factor Authentication (2FA)",definition:"A security process that requires two different authentication factors to verify a user's identity, such as a password plus a code from your phone."},{term:"Phishing",definition:"A cyber attack that uses disguised emails, messages, or websites to trick people into providing sensitive information like passwords or credit card numbers."},{term:"Malware",definition:"Malicious software designed to harm, exploit, or otherwise compromise a computer system. Includes viruses, trojans, ransomware, and spyware."},{term:"VPN (Virtual Private Network)",definition:"A service that encrypts your internet connection and routes it through a server in another location, protecting your privacy and security online."},{term:"Encryption",definition:"The process of converting information into a coded format that can only be read by someone with the correct decryption key."},{term:"Zero-Day Exploit",definition:"A cyber attack that targets a software vulnerability that is unknown to the software vendor, giving them 'zero days' to fix it."},{term:"Password Manager",definition:"A software application that stores and manages passwords in an encrypted database, allowing you to use unique, strong passwords for every account."},{term:"Social Engineering",definition:"Psychological manipulation techniques used to trick people into revealing confidential information or performing actions that compromise security."},{term:"Ransomware",definition:"A type of malware that encrypts a victim's files and demands payment (ransom) in exchange for the decryption key."},{term:"Firewall",definition:"A network security system that monitors and controls incoming and outgoing network traffic based on predetermined security rules."},{term:"Authentication",definition:"The process of verifying the identity of a user, device, or system before granting access to resources."},{term:"Brute Force Attack",definition:"A trial-and-error method used to decode encrypted data by systematically trying all possible combinations until the correct one is found."},{term:"SSL/TLS",definition:"Security protocols that encrypt data transmitted between a web browser and a server, indicated by 'https://' in URLs."},{term:"Patch",definition:"A software update that fixes security vulnerabilities, bugs, or adds minor improvements to a program."},{term:"Multi-Factor Authentication (MFA)",definition:"Similar to 2FA but can require more than two authentication factors, providing even stronger security."}],ACHIEVEMENTS=[{id:"first-module",icon:"ðŸŽ¯",name:"First Steps",description:"Complete your first module",condition:()=>Object.keys(appState.progress).length>0},{id:"half-modules",icon:"ðŸ“š",name:"Halfway There",description:"Complete 50% of modules",condition:()=>MODULES.filter((e=>(appState.progress[e.id]||0)>=e.progress.total)).length>=Math.floor(MODULES.length/2)},{id:"all-modules",icon:"ðŸ†",name:"Module Master",description:"Complete all modules",condition:()=>MODULES.filter((e=>(appState.progress[e.id]||0)>=e.progress.total)).length===MODULES.length},{id:"first-quiz",icon:"âœ…",name:"Quiz Novice",description:"Take your first quiz",condition:()=>Object.keys(appState.quizAnswers).length>0},{id:"perfect-quiz",icon:"ðŸ’¯",name:"Perfect Score",description:"Get 100% on any quiz",condition:()=>QUIZZES.some((e=>{const t=e.questions.every(((t,o)=>{const s=`${e.id}-${o}`;return appState.quizAnswers[s]===t.correct})),o=e.questions.every(((t,o)=>{const s=`${e.id}-${o}`;return void 0!==appState.quizAnswers[s]}));return t&&o}))},{id:"all-quizzes",icon:"ðŸŽ“",name:"Quiz Champion",description:"Complete all quizzes",condition:()=>{let e=0,t=0;return QUIZZES.forEach((o=>{o.questions.forEach(((s,a)=>{e++,void 0!==appState.quizAnswers[`${o.id}-${a}`]&&t++}))})),t===e&&e>0}},{id:"security-expert",icon:"ðŸ›¡ï¸",name:"Security Expert",description:"Complete everything",condition:()=>{const e=MODULES.every((e=>(appState.progress[e.id]||0)>=e.progress.total));let t=0,o=0;return QUIZZES.forEach((e=>{e.questions.forEach(((s,a)=>{t++,void 0!==appState.quizAnswers[`${e.id}-${a}`]&&o++}))})),e&&o===t}}];function getIcon(e){return{lock:'<svg viewBox="0 0 24 24" width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="10" width="18" height="11" rx="2" stroke="white" stroke-width="1.6"/><path d="M7 10V7a5 5 0 0 1 10 0v3" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>',shield:'<svg viewBox="0 0 24 24" width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3l7 3v5c0 5-3.5 9-7 10-3.5-1-7-5-7-10V6l7-3z" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>',phish:'<svg viewBox="0 0 24 24" width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 12c4 0 8-4 12-4s8 4 8 4-4 4-8 4S7 12 3 12z" stroke="white" stroke-width="1.6"/><path d="M14 9l3 3-3 3" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>',refresh:'<svg viewBox="0 0 24 24" width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8" stroke="white" stroke-width="1.6" stroke-linecap="round"/><path d="M21 3v5h-5" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>',wifi:'<svg viewBox="0 0 24 24" width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 12.55a11 11 0 0114.08 0M1.42 9a16 16 0 0121.16 0M8.53 16.11a6 6 0 016.95 0M12 20h.01" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>',save:'<svg viewBox="0 0 24 24" width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke="white" stroke-width="1.6"/><path d="M17 21v-8H7v8M7 3v5h8" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>'}[e]||'<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="white" stroke-width="1.6"/></svg>'}function applyTheme(e){document.documentElement.setAttribute("data-theme","dark"===e?"dark":""),appState.theme=e,$("#themeToggle").textContent="dark"===e?" Light":" Dark"}function percent(e,t){return Math.round(e/Math.max(t,1)*100)}function escapeHtml(e=""){return e.replace?.(/[&<>"']/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e])))||e}function checkAchievements(){const e=[];ACHIEVEMENTS.forEach((t=>{!appState.badges.includes(t.id)&&t.condition()&&(appState.badges.push(t.id),e.push(t))})),e.length>0&&(showBadgeNotification(e),updateStatsWidget())}function showBadgeNotification(e){e.forEach(((e,t)=>{setTimeout((()=>{const t=document.createElement("div");t.style.cssText="position:fixed;top:80px;right:20px;background:var(--card-bg);padding:16px 20px;border-radius:10px;box-shadow:var(--shadow);border:1px solid var(--glass-border);z-index:1000;animation:slideInRight 0.3s;backdrop-filter:blur(8px);",t.innerHTML=`<strong style="display:block;margin-bottom:4px;">${e.icon} ${escapeHtml(e.name)}</strong><span class="muted">${escapeHtml(e.description)}</span>`,document.body.appendChild(t),setTimeout((()=>{t.style.animation="slideOutRight 0.3s",setTimeout((()=>t.remove()),300)}),3e3)}),500*t)}))}function updateStatsWidget(){const e=MODULES.filter((e=>(appState.progress[e.id]||0)>=e.progress.total)).length;let t=0,o=0;QUIZZES.forEach((e=>{e.questions.forEach(((s,a)=>{o++,appState.quizAnswers[`${e.id}-${a}`]===s.correct&&t++}))})),$("#statsWidget").innerHTML=`<div class="stat-card"><p class="stat-value">${e}/${MODULES.length}</p><p class="stat-label">Modules Complete</p></div><div class="stat-card"><p class="stat-value">${t}/${o}</p><p class="stat-label">Quiz Correct</p></div><div class="stat-card"><p class="stat-value">${appState.badges.length}/${ACHIEVEMENTS.length}</p><p class="stat-label">Badges Earned</p></div>`}function markModuleCompleted(e){const t=MODULES.find((t=>t.id===e));t&&(appState.progress[e]=t.progress.total,renderModules(),updateStatsWidget(),updateProgressView(),checkAchievements(),checkCertificate(),window.firebaseAuth&&window.firebaseAuth.saveProgress())}function renderModules(){const e=$("#modulesGrid");e.innerHTML="",MODULES.forEach((t=>{const o=appState.progress[t.id]||0,s=t.progress.total,a=percent(o,s),i=o>=s,r=document.createElement("article");r.className="module",r.setAttribute("tabindex","0"),r.setAttribute("role","article"),r.setAttribute("aria-label",`${t.title} module, ${a}% complete`),r.innerHTML=`${i?'<span class="badge" aria-label="Completed">âœ“</span>':""}<div class="module-header" style="display:flex;gap:12px;align-items:flex-start;"><div class="icon" aria-hidden="true">${getIcon(t.icon)}</div><div style="flex:1;"><h3>${escapeHtml(t.title)}</h3><p>${escapeHtml(t.description)}</p></div></div><div class="module-footer"><div class="progress-row" style="margin-top:12px;display:flex;align-items:center;gap:8px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="${a}" aria-label="Module progress ${a}%"><div class="progress-fill" style="width:${a}%;"></div></div><div class="progress-text">${a}%</div></div><div style="display:flex;gap:8px;margin-top:12px;justify-content:space-between;"><button class="ghost" data-open="${t.id}" aria-label="View ${t.title} details">Start Lesson</button><button class="btn" data-complete="${t.id}" ${i?"disabled":""} aria-label="${i?"Module completed":"Mark module complete"}">${i?"âœ“ Completed":"Mark Complete"}</button></div></div>`,e.appendChild(r)})),qs("[data-open]").forEach((e=>e.addEventListener("click",(e=>openModal(e.currentTarget.dataset.open))))),qs("[data-complete]").forEach((e=>e.addEventListener("click",(e=>{markModuleCompleted(e.currentTarget.dataset.complete)})))),observeInView()}applyTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");const modal=$("#modal"),modalContent=$("#modalContent"),modalClose=$("#modalClose");let lastFocused=null;function openModal(e){const t=MODULES.find((t=>t.id===e));if(!t)return;lastFocused=document.activeElement;const o=appState.progress[e]||0,s=t.progress.total;modalContent.innerHTML=`<h2 id="modalTitle">${escapeHtml(t.title)}</h2><p class="muted">${escapeHtml(t.description)}</p><div style="margin-top:18px;"><h3 style="font-size:1.1rem;margin-bottom:12px;">Course Sections</h3>${Array.isArray(t.sections)&&t.sections.length?t.sections.map(((e,t)=>`<section style="margin-bottom:16px;padding:14px;border-radius:10px;border:1px solid var(--glass-border);"><h4 style="margin:0 0 8px 0;font-weight:700;font-size:1rem;">${t+1}. ${escapeHtml(e.title||"Section")}${e.time?`<span class="muted" style="font-weight:400;font-size:0.9rem;"> â€¢ ${escapeHtml(e.time)}</span>`:""}</h4>${e.objectives?'<ul class="muted" style="margin:8px 0;padding-left:20px;">'+e.objectives.map((e=>`<li style="margin:4px 0;">${escapeHtml(e)}</li>`)).join("")+"</ul>":""}${e.content?`<div class="lesson-text" style="margin-top:10px;line-height:1.6;color:var(--text-color);">${e.content}</div>`:""}</section>`)).join(""):'<div class="muted">No detailed content available for this module yet.</div>'}</div><div style="margin-top:18px;padding:14px;background:rgba(37,99,235,0.05);border-radius:10px;border:1px solid var(--glass-border);"><strong>Progress:</strong> ${o} of ${s} sections completed (${percent(o,s)}%)</div><div style="margin-top:18px;display:flex;gap:10px;justify-content:flex-end;"><button class="ghost" id="modalCloseBtn">Close</button><button class="btn" id="modalAddProgress" ${o>=s?"disabled":""}>${o>=s?"âœ“ Completed":"Mark as Complete"}</button></div>`,modal.setAttribute("aria-hidden","false"),trapFocus(modal),$("#modalAddProgress").addEventListener("click",(()=>{markModuleCompleted(e),closeModal()})),$("#modalCloseBtn").addEventListener("click",closeModal),modalClose.addEventListener("click",closeModal),document.addEventListener("keydown",onModalKeyDown)}function closeModal(){modal.setAttribute("aria-hidden","true"),lastFocused&&lastFocused.focus&&lastFocused.focus(),document.removeEventListener("keydown",onModalKeyDown)}function onModalKeyDown(e){"Escape"===e.key&&closeModal(),"Tab"===e.key&&trapTabKey(e,modal)}function trapFocus(e){const t=e.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])');t.length&&t[0].focus()}function trapTabKey(e,t){const o=Array.from(t.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])')).filter((e=>null!==e.offsetParent));if(!o.length)return;const s=o[0],a=o[o.length-1];e.shiftKey&&document.activeElement===s?(e.preventDefault(),a.focus()):e.shiftKey||document.activeElement!==a||(e.preventDefault(),s.focus())}function renderQuizzes(){const e=$("#quizContainer");e.innerHTML="",QUIZZES.forEach((t=>{const o=document.createElement("div");o.classList.add("quiz-card"),o.style.marginBottom="24px";const s=t.open||!1;let a=`<div class="quiz-header" style="display:flex;justify-content:space-between;align-items:center;"><h3>${escapeHtml(t.title)}</h3><button class="ghost" data-toggle="${t.id}" aria-label="${s?"Collapse quiz":"Expand quiz"}">${s?"Close":"Open"}</button></div>`,i="";if(s){let e=0,o=0;t.questions.forEach(((s,a)=>{const i=`${t.id}-${a}`;void 0!==appState.quizAnswers[i]&&(o++,appState.quizAnswers[i]===s.correct&&e++)}));const s=o===t.questions.length,a=s?Math.round(e/t.questions.length*100):0;s&&(i+=`<div class="quiz-score"><strong>Your Score: ${a}%</strong> (${e}/${t.questions.length} correct)<button class="ghost" data-retake="${t.id}" style="margin-left:12px;">Retake Quiz</button></div>`),t.questions.forEach(((e,o)=>{const s=appState.quizAnswers[`${t.id}-${o}`],a=void 0!==s,r=s===e.correct;i+=`<div class="quiz-question"><strong>${o+1}. ${escapeHtml(e.question)}</strong><div class="quiz-options">${e.options.map(((i,r)=>{let n="quiz-option";return a&&(r===e.correct?n+=" correct":r===s&&(n+=" incorrect")),`<div class="${n}" data-quiz="${t.id}" data-question="${o}" data-option="${r}" style="${a?"cursor:default;":""}">${escapeHtml(i)}</div>`})).join("")}</div>${a?`<div class="quiz-result ${r?"correct":"incorrect"}">${r?"âœ“ Correct!":"âœ— Incorrect"} ${escapeHtml(e.explanation)}</div>`:""}</div>`}))}o.innerHTML=a+`<div class="quiz-body">${i}</div>`,e.appendChild(o)})),qs("[data-toggle]").forEach((e=>e.addEventListener("click",(e=>{const t=e.currentTarget.dataset.toggle;QUIZZES.forEach((e=>{e.id===t?e.open=!e.open:e.open=!1})),renderQuizzes()})))),qs(".quiz-option").forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget,o=t.dataset.quiz,s=parseInt(t.dataset.question),a=parseInt(t.dataset.option),i=`${o}-${s}`;void 0===appState.quizAnswers[i]&&(appState.quizAnswers[i]=a,renderQuizzes(),updateStatsWidget(),checkAchievements(),checkCertificate(),window.firebaseAuth&&window.firebaseAuth.saveProgress())}))})),qs("[data-retake]").forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.dataset.retake,o=QUIZZES.find((e=>e.id===t));o&&(o.questions.forEach(((e,o)=>{delete appState.quizAnswers[`${t}-${o}`]})),renderQuizzes(),updateStatsWidget())}))}))}function renderTools(){$("#toolsContainer").innerHTML='<div class="tool-card"><h3>Password Strength Tester</h3><p class="muted">Test the strength of your passwords in real-time.</p><input type="text" id="passwordInput" class="tool-input" placeholder="Enter a password to test..." aria-label="Password to test"><div id="passwordStrength" class="tool-output" style="display:none;"></div><div id="passwordTips" style="margin-top:12px;"></div></div><div class="tool-card"><h3>Phishing Email Detector</h3><p class="muted">Practice identifying phishing attempts. Click the red flags to reveal them!</p><div class="phishing-email" id="phishingEmail1"><div style="margin-bottom:12px;"><strong>From:</strong> <span class="red-flag" title="Suspicious domain">security@paypa1-verify.com</span></div><div style="margin-bottom:12px;"><strong>Subject:</strong> <span class="red-flag" title="Creates urgency">URGENT: Your account will be suspended in 24 hours!</span></div><div style="margin-bottom:8px;"><strong>Message:</strong></div><div style="line-height:1.6;">Dear Valued Customer,<br><br>We have detected <span class="red-flag" title="Vague security concern">suspicious activity</span> on your account. You must verify your identity immediately by clicking the link below or your account will be <span class="red-flag" title="Threatening language">permanently disabled</span>.<br><br><a href="#" class="red-flag" style="color:var(--accent);" title="Suspicious URL">Click here to verify your account</a><br><br>Thank you,<br><span class="red-flag" title="Generic signature">Customer Support Team</span></div></div><button class="btn" id="revealPhishing" style="margin-top:12px;">Reveal All Red Flags</button><div id="phishingExplanation" style="display:none;margin-top:12px;padding:14px;background:rgba(239,68,68,0.1);border-radius:8px;border:1px solid var(--danger);"><strong>Red Flags Identified:</strong><ul style="margin:8px 0;padding-left:20px;line-height:1.6;"><li>Misspelled domain (paypa1 vs paypal)</li><li>Creates false urgency and fear</li><li>Vague security concerns without specifics</li><li>Threatening language about account suspension</li><li>Generic greeting and signature</li><li>Suspicious link (hover to see real URL)</li></ul></div></div><div class="tool-card"><h3>Two-Factor Authentication Demo</h3><p class="muted">Experience how 2FA protects your accounts.</p><div style="padding:16px;background:rgba(255,255,255,0.02);border-radius:8px;border:1px solid var(--glass-border);"><div style="margin-bottom:16px;"><label style="display:block;margin-bottom:8px;font-weight:600;">Step 1: Enter Username & Password</label><input type="text" placeholder="Username" class="tool-input" style="margin-bottom:8px;" id="demo2faUser"><input type="password" placeholder="Password" class="tool-input" id="demo2faPass"></div><button class="btn" id="demo2faLogin" style="width:100%;">Login</button><div id="demo2faStep2" style="display:none;margin-top:16px;"><label style="display:block;margin-bottom:8px;font-weight:600;">Step 2: Enter 6-Digit Code from Authenticator App</label><input type="text" placeholder="000000" maxlength="6" class="tool-input" id="demo2faCode" style="text-align:center;font-size:1.5rem;letter-spacing:0.5em;"><button class="btn" id="demo2faVerify" style="width:100%;margin-top:12px;">Verify Code</button></div><div id="demo2faSuccess" style="display:none;margin-top:16px;padding:14px;background:rgba(34,197,94,0.1);border-radius:8px;border:1px solid var(--success);text-align:center;"><strong style="color:var(--success);font-size:1.2rem;">âœ“ Login Successful!</strong><p style="margin:8px 0 0 0;" class="muted">Your account is protected with 2FA. Even if someone knows your password, they can\'t access your account without the verification code.</p></div></div></div>';const e=$("#passwordInput"),t=$("#passwordStrength"),o=$("#passwordTips");e.addEventListener("input",(e=>{const s=e.target.value;if(!s)return t.style.display="none",void(o.innerHTML="");let a=0;const i=[];s.length>=12?a+=25:i.push("Use at least 12 characters"),/[a-z]/.test(s)&&/[A-Z]/.test(s)?a+=25:i.push("Mix uppercase and lowercase"),/\d/.test(s)?a+=25:i.push("Include numbers"),/[^a-zA-Z0-9]/.test(s)?a+=25:i.push("Add special characters (!@#$%^&*)");let r="strength-weak",n="Weak";a>=75?(r="strength-strong",n="Strong"):a>=50&&(r="strength-medium",n="Medium"),t.className=`tool-output ${r}`,t.style.display="block",t.innerHTML=`<strong>Strength: ${n}</strong> (${a}/100)`,i.length>0?o.innerHTML=`<div class="muted"><strong>Tips to improve:</strong><ul style="margin:4px 0;padding-left:20px;">${i.map((e=>`<li>${e}</li>`)).join("")}</ul></div>`:o.innerHTML='<div style="color:var(--success);"><strong>âœ“ Excellent password!</strong></div>'})),$("#revealPhishing").addEventListener("click",(()=>{$("#phishingEmail1").classList.add("revealed"),$("#phishingExplanation").style.display="block",qs(".red-flag").forEach((e=>{e.style.background="rgba(239,68,68,0.25)",e.style.outline="2px solid var(--danger)"}))})),qs(".red-flag").forEach((e=>{e.addEventListener("click",(function(){this.style.background="rgba(239,68,68,0.25)",this.style.outline="2px solid var(--danger)",alert(`Red Flag: ${this.getAttribute("title")}`)}))})),$("#demo2faLogin").addEventListener("click",(()=>{const e=$("#demo2faUser").value,t=$("#demo2faPass").value;e&&t?($("#demo2faStep2").style.display="block",$("#demo2faCode").focus()):alert("Please enter username and password")})),$("#demo2faVerify").addEventListener("click",(()=>{6===$("#demo2faCode").value.length?($("#demo2faSuccess").style.display="block",$("#demo2faStep2").style.display="none"):alert("Please enter a 6-digit code")})),$("#demo2faCode").addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D/g,"")}))}function renderGlossary(){const e=$("#glossaryContainer"),t=GLOSSARY.map((e=>`<dl class="glossary-term"><dt>${escapeHtml(e.term)}</dt><dd>${escapeHtml(e.definition)}</dd></dl>`)).join("");e.innerHTML=t}function renderResources(){const e=$("#resourcesContainer"),t=RESOURCES.map((e=>`<div class="resource-card"><h3 style="margin:0 0 8px 0;font-size:1.1rem;">${escapeHtml(e.title)}</h3><p class="muted" style="margin:0 0 12px 0;">${escapeHtml(e.description)}</p><ul class="muted" style="margin:0;padding-left:20px;">${e.links.map((e=>`<li style="margin:6px 0;">${e.url?`<a href="${escapeHtml(e.url)}" target="_blank" rel="noopener noreferrer" class="resource-link">${escapeHtml(e.name)}</a>`:`<strong>${escapeHtml(e.name)}</strong>`} â€” ${escapeHtml(e.desc)}</li>`)).join("")}</ul></div>`)).join("");e.innerHTML=t}function renderAchievements(){const e=$("#achievementsContainer"),t=`<div class="badges-grid">${ACHIEVEMENTS.map((e=>{const t=appState.badges.includes(e.id);return`<div class="badge-item ${t?"earned":"locked"}" aria-label="${t?"Earned":"Locked"}: ${e.name}"><span class="badge-icon">${e.icon}</span><div class="badge-name">${escapeHtml(e.name)}</div><div class="muted" style="font-size:0.75rem;margin-top:4px;">${escapeHtml(e.description)}</div></div>`})).join("")}</div>`;e.innerHTML=t}function updateProgressView(){const e=$("#progressContainer"),t=MODULES.filter((e=>(appState.progress[e.id]||0)>=e.progress.total)).length,o=MODULES.length,s=percent(t,o);let a=0,i=0,r=0;QUIZZES.forEach((e=>{e.questions.forEach(((t,o)=>{r++;const s=`${e.id}-${o}`;void 0!==appState.quizAnswers[s]&&(a++,appState.quizAnswers[s]===t.correct&&i++)}))}));const n=r>0?percent(a,r):0,c=t===o&&a===r;e.innerHTML=`<div style="display:grid;gap:16px;"><div class="resource-card"><h3 style="margin:0 0 12px 0;">Overall Progress</h3><div style="margin-bottom:16px;"><div style="display:flex;justify-content:space-between;margin-bottom:6px;"><span>Modules Completed</span><strong>${t} / ${o}</strong></div><div class="progress-bar" style="height:12px;"><div class="progress-fill" style="width:${s}%;"></div></div></div><div><div style="display:flex;justify-content:space-between;margin-bottom:6px;"><span>Quiz Questions Answered</span><strong>${a} / ${r}</strong></div><div class="progress-bar" style="height:12px;"><div class="progress-fill" style="width:${n}%;"></div></div></div><div style="margin-top:16px;"><div style="display:flex;justify-content:space-between;margin-bottom:6px;"><span>Quiz Accuracy</span><strong>${a>0?percent(i,a):0}%</strong></div></div></div><div class="resource-card"><h3 style="margin:0 0 12px 0;">Module Details</h3>${MODULES.map((e=>{const t=appState.progress[e.id]||0,o=e.progress.total,s=percent(t,o);return`<div style="margin-bottom:12px;"><div style="display:flex;justify-content:space-between;margin-bottom:4px;"><span>${escapeHtml(e.title)}</span><span class="muted">${t}/${o}</span></div><div class="progress-bar" style="height:8px;"><div class="progress-fill" style="width:${s}%;"></div></div></div>`})).join("")}</div>${c?'<div id="certificateContainer"></div>':""}</div>`,c&&showCertificate()}function checkCertificate(){MODULES.filter((e=>(appState.progress[e.id]||0)>=e.progress.total)).length;QUIZZES.forEach((e=>{e.questions.forEach(((t,o)=>{void 0!==appState.quizAnswers[`${e.id}-${o}`]&&0}))}))}function showCertificate(){const e=$("#certificateContainer"),t=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});e.innerHTML=`<div class="certificate"><h2> Certificate of Completion</h2><p class="cert-text">This certifies that</p><p class="cert-name">Cybersecurity Champion</p><p class="cert-text">has successfully completed the</p><p class="cert-text" style="font-weight:700;font-size:1.2rem;">Cybersecurity Awareness Training Program</p><p class="cert-text" style="margin-top:20px;">Completed on ${t}</p><p class="muted" style="margin-top:16px;font-size:0.9rem;">${MODULES.length} modules completed â€¢ ${QUIZZES.reduce(((e,t)=>e+t.questions.length),0)} quiz questions answered</p></div>`}function showSection(e){qs(".section-content").forEach((e=>e.classList.remove("active"))),qs("nav.sidebar a").forEach((e=>e.classList.remove("active")));const t=$(`#${e}Section`);t&&t.classList.add("active");const o=qs(`nav.sidebar a[data-section="${e}"]`)[0];o&&o.classList.add("active"),"quizzes"===e&&renderQuizzes(),"tools"===e&&renderTools(),"glossary"===e&&renderGlossary(),"resources"===e&&renderResources(),"achievements"===e&&renderAchievements(),"progress"===e&&updateProgressView()}function scrollToLearn(){document.getElementById("app").scrollIntoView({behavior:"smooth"})}function observeInView(){const e=document.querySelectorAll(".module");if("IntersectionObserver"in window){const t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("in-view"),t.unobserve(e.target))}))}),{threshold:.12});e.forEach((e=>t.observe(e)))}else e.forEach((e=>e.classList.add("in-view")))}function init(){renderModules(),renderResources(),renderGlossary(),updateStatsWidget(),updateProgressView(),renderAchievements(),checkAchievements(),checkCertificate()}modal.addEventListener("click",(e=>{e.target===modal&&closeModal()})),$("#exportProgress").addEventListener("click",(()=>{const e={exportDate:(new Date).toISOString(),modules:MODULES.map((e=>({id:e.id,title:e.title,progress:appState.progress[e.id]||0,total:e.progress.total,percentComplete:percent(appState.progress[e.id]||0,e.progress.total)}))),quizzes:QUIZZES.map((e=>{const t=e.questions.map(((t,o)=>{const s=`${e.id}-${o}`;return{userAnswer:appState.quizAnswers[s]??null}}));let o=0,s=0;return t.forEach(((e,t)=>{null!==e.userAnswer&&(s++,e.userAnswer===QUIZZES.find((t=>t.id===e.id)).questions[t].correct&&o++)})),{id:e.id,title:e.title,answered:s,total:e.questions.length,correct:o,score:s?Math.round(o/s*100):0,questions:t}})),badges:appState.badges,summary:{modulesCompleted:MODULES.filter((e=>(appState.progress[e.id]||0)>=e.progress.total)).length,totalModules:MODULES.length,badgesEarned:appState.badges.length,totalBadges:ACHIEVEMENTS.length}},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),o=URL.createObjectURL(t),s=document.createElement("a");s.href=o,s.download=`cybersecurity-progress-${(new Date).toISOString().split("T")[0]}.json`,s.click(),URL.revokeObjectURL(o)})),qs("nav.sidebar a").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();showSection(e.currentTarget.dataset.section)}))})),$("#refreshBtn").addEventListener("click",(()=>{confirm("Reset all progress? This will clear your completed modules, quiz answers, and badges.")&&(appState.progress={},appState.quizAnswers={},appState.badges=[],renderModules(),updateStatsWidget(),updateProgressView(),showSection("modules"))})),document.addEventListener("keydown",(e=>{if("Escape"===e.key&&"false"===modal.getAttribute("aria-hidden")&&closeModal(),(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),console.log("Search shortcut triggered (not yet implemented)")),e.altKey&&e.key>="1"&&e.key<="7"){e.preventDefault();const t=["modules","quizzes","tools","glossary","resources","achievements","progress"],o=parseInt(e.key)-1;t[o]&&showSection(t[o])}})),init();const style=document.createElement("style");function pickChar(){const e=config.charSet;return e.charAt(Math.floor(Math.random()*e.length))}style.textContent="@keyframes slideInRight{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOutRight{from{transform:translateX(0);opacity:1}to{transform:translateX(400px);opacity:0}}",document.head.appendChild(style),console.log("%cðŸ›¡ï¸ Cybersecurity Awareness Dashboard Loaded!","font-size:16px;color:#2563eb;font-weight:bold;"),console.log("%cKeyboard Shortcuts:","font-size:14px;font-weight:bold;"),console.log("Alt+1-7: Navigate sections"),console.log("Escape: Close modal");const scrollBtn=document.getElementById("scrollTopBtn");window.addEventListener("scroll",(()=>{scrollBtn.style.display=document.documentElement.scrollTop>200||document.body.scrollTop>200?"block":"none"})),scrollBtn.addEventListener("click",(()=>{const e=document.querySelector("body");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}));const footerModalOverlay=document.getElementById("footerModalOverlay"),footerModalTitle=document.getElementById("footerModalTitle"),footerModalText=document.getElementById("footerModalText"),footerModalClose=document.getElementById("footerModalClose");document.querySelectorAll("a[data-modal]").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("data-modal");"tos"===o?(footerModalTitle.textContent="Terms of Service",footerModalText.innerHTML='\n        <h3>Effective Date: October 10, 2025</h3>\n        <ol>\n          <li><strong>Acceptance of Terms:</strong> By accessing or using LearnCyberSafety (the "Site"), you agree to be bound by these Terms of Service and all applicable laws.</li>\n          <li><strong>Use of Site:</strong> You may use the Site for personal, non-commercial purposes only. You agree not to attempt unauthorized access, introduce malware, or use the Site for illegal activities.</li>\n          <li><strong>Account Registration:</strong> You are responsible for maintaining the confidentiality of your login information and all activities under your account.</li>\n          <li><strong>User Content:</strong> You retain ownership of content you submit but grant LearnCyberSafety a license to use it for educational purposes on the Site.</li>\n          <li><strong>Prohibited Conduct:</strong> Do not impersonate others, circumvent security, or harass others using the Site.</li>\n          <li><strong>Disclaimers:</strong> The Site is provided "as is." LearnCyberSafety does not guarantee accuracy, reliability, or uninterrupted access.</li>\n          <li><strong>Limitation of Liability:</strong> LearnCyberSafety is not liable for damages arising from your use of the Site.</li>\n          <li><strong>Modifications:</strong> We may update these Terms at any time. Continued use constitutes acceptance of changes.</li>\n          <li><strong>Contact:</strong> For questions, contact us at <a href="mailto:andrewcappelli13@gmail.com">andrewcappelli13@gmail.com</a>.</li>\n        </ol>\n      '):"privacy"===o&&(footerModalTitle.textContent="Privacy Policy",footerModalText.innerHTML='\n        <h3>Effective Date: October 10, 2025</h3>\n        <ol>\n          <li><strong>Information We Collect:</strong> We may collect email addresses for accounts, anonymous usage data, and feedback or content you submit.</li>\n          <li><strong>How We Use Information:</strong> To provide Site functionality, send account-related emails, and improve user experience.</li>\n          <li><strong>Data Sharing:</strong> We do not sell personal information. Data may be shared with service providers to operate the Site.</li>\n          <li><strong>Cookies & Tracking:</strong> We may use cookies or analytics to understand traffic. No personal info is shared for marketing.</li>\n          <li><strong>Security:</strong> Reasonable measures are in place to protect your data, but no online service is 100% secure.</li>\n          <li><strong>User Rights:</strong> You may request deletion of your account or personal data by contacting <a href="mailto:andrewcappelli13@gmail.com">andrewcappelli13@gmail.com</a>.</li>\n          <li><strong>Third-Party Links:</strong> The Site may contain links to external websites. We are not responsible for their privacy practices.</li>\n          <li><strong>Policy Updates:</strong> Updates may occur periodically. Continued use indicates acceptance.</li>\n        </ol>\n      '),footerModalOverlay.style.display="flex"}))})),footerModalClose.addEventListener("click",(()=>footerModalOverlay.style.display="none")),footerModalOverlay.addEventListener("click",(e=>{e.target===footerModalOverlay&&(footerModalOverlay.style.display="none")}));